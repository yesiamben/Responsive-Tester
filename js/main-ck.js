function setDefaults(){localStorage.clear();var e=(new Date).getTime();localStorage.setItem("size-1"+e,JSON.stringify({name:"iPad Landscape",w:"1024",h:"768",display:"1"}));localStorage.setItem("size-2"+e,JSON.stringify({name:"iPad Portrait",w:"768",h:"1024",display:"1"}));localStorage.setItem("size-3"+e,JSON.stringify({name:"Nexus 7 / Tablet",w:"601",h:"800",display:"1"}));localStorage.setItem("size-4"+e,JSON.stringify({name:"Small Tablet",w:"480",h:"640",display:"1"}));localStorage.setItem("size-5"+e,JSON.stringify({name:"Nexus 5 / Smartphone",w:"360",h:"598",display:"1"}));localStorage.setItem("size-6"+e,JSON.stringify({name:"iPhone 4 / Smartphone",w:"320",h:"480",display:"1"}));localStorage.setItem("size-7"+e,JSON.stringify({name:"iPhone 6+ / Smartphone",w:"414",h:"736",display:"1"}));localStorage.setItem("size-8"+e,JSON.stringify({name:"Small Phone",w:"240",h:"320",display:"0"}));localStorage.setItem("extraPixels","0");localStorage.setItem("largestFirst","0");localStorage.setItem("cropFrames","1");localStorage.setItem("showNotice","1");localStorage.setItem("panelHidden","0")}function setSizesScrollHeight(){var e=$("#bottomLeft").outerHeight();$("#defContainer").css("padding-bottom",e)}function sortList(e,t){return localStorage.getItem("largestFirst")=="1"?$(t).data("fwidth")>$(e).data("fwidth")?1:-1:$(t).data("fwidth")<$(e).data("fwidth")?1:-1}function sortLists(){$("#sizesList li").sort(sortList).appendTo("#sizesList");$("#panel div").sort(sortList).appendTo("#panel")}function createIframe(e){frameOptions=JSON.parse(localStorage.getItem(e));extraPixels=localStorage.getItem("extraPixels");frameWidth=parseInt(frameOptions.w)+parseInt(extraPixels);$("<h2>"+frameOptions.w+" x "+frameOptions.h+" <span>("+frameOptions.name+")</span></h2>").appendTo("#"+e);$('<iframe src="'+defaulturl+'" style="width: '+frameWidth+"px; height: "+frameOptions.h+'px;">').appendTo("#"+e);$("#"+e+" iframe").load(function(){frameLoaded("#"+e)});$("#"+e).fadeIn("fast",function(){resizeFramePanel();cropFrames()})}function resizeFramePanel(){var e=0,t=0;$("#panel div").each(function(){if(!$(this).hasClass("noShow")){e+=$(this).outerWidth(!0);$(this).outerHeight(!0)>t&&(t=$(this).outerHeight(!0))}});e+=parseInt($("#panel").css("padding-left"))+parseInt($("#panel").css("padding-right"));$("#panel").css("width",e)}function updateFrames(){$("#panel").empty();$("#urlbox").addClass("isLoading");getAllFrames(!1)}function frameLoaded(e){iframesLoaded++;if(iframesLoaded==$("#panel iframe").length){iframesLoaded=0;$("#urlbox").removeClass("isLoading")}}function getAllFrames(e){for(var t=0,n=localStorage.length;t<n;++t)if(localStorage.key(t).substring(0,5)=="size-"){var r=JSON.parse(localStorage.getItem(localStorage.key(t))),i="",s="",o=" noShow";if(r.display=="1"){i=' checked="checked"';s=' class="checked"';o=""}e==1&&$("#sizesList").append('<li data-fwidth="'+r.w+'" data-panelid="'+localStorage.key(t)+'"><label'+s+'><input type="checkbox" '+i+" />"+r.w+" x "+r.h+" ("+r.name+')</label><div class="close"></div></li>');$("#panel").append('<div id="'+localStorage.key(t)+'" class="framePanel'+o+'" data-fwidth="'+r.w+'"></div>');r.display=="1"&&createIframe(localStorage.key(t))}sortLists()}function reloadFrames(){updateFrames()}function cropFrames(){if(localStorage.getItem("cropFrames")=="1"){var e=$(window).outerHeight(!0),t=parseInt($("#panel").css("padding-top"))+parseInt($("#panel").css("padding-bottom"))+$("#panel div h2").outerHeight(!0);setHeight=e-t-20;$("#panel iframe").css("max-height",setHeight+"px")}else $("#panel iframe").css("max-height","")}function addHttp(e){return e.substr(0,7)!=="file://"&&e.substr(0,7)!=="http://"&&e.substr(0,8)!=="https://"?"http://"+e:e}var defaulturl="http://www.responsivetester.net/go.html";Storage.prototype.setObject=function(e,t){this.setItem(e,JSON.stringify(t))};Storage.prototype.getObject=function(e){var t=this.getItem(e);return t&&JSON.parse(t)};var iframesLoaded=0;$(document).ready(function(){localStorage.getItem("panelHidden")===null&&setDefaults();localStorage.getItem("largestFirst")=="1"&&$("#largestFirst").prop("checked",!0);localStorage.getItem("cropFrames")=="1"&&$("#cropFrames").prop("checked",!0);$("#extraPixels").val(localStorage.getItem("extraPixels"));if(localStorage.getItem("panelHidden")=="1"){$("#container").css("padding-left","10px");$("nav").css("left","-290px");$("#slideInOut").addClass("isIn")}else{$("#container").css("padding-left","300px");$("nav").css("left","0");$("#slideInOut").removeClass("isIn")}setSizesScrollHeight();window.addEventListener("resize",function(e){setSizesScrollHeight();cropFrames()});var e=document.URL;if(e.indexOf("?")===-1)e="";else{e=e.substring(e.indexOf("?"));e=e.substr(1)}e===""&&(e=defaulturl);e=addHttp(e);defaulturl=e;$("#urlbox").val(e);$("#urlbox").addClass("isLoading");getAllFrames(!0);$("#sizesList").on("click",".close",function(e){e.preventDefault();e.stopPropagation();if(window.confirm("Sure?")){var t=$(this).parent("li");localStorage.removeItem(t.data("panelid"));$("#"+t.data("panelid")).remove();$(t).remove()}});$("#submitButton").on("click",function(e){e.preventDefault();$("#submitButton").prop("disabled",!0);if($("#wBox").val()!=""&&$("#hBox").val()!=""&&$("#iBox").val()!=""&&$("#wBox").val()>0&&$("#hBox").val()>0)$("#loading").fadeIn(100,function(){var e=(new Date).getTime();localStorage.setItem("size-"+e,JSON.stringify({name:$("#iBox").val(),w:$("#wBox").val(),h:$("#hBox").val(),display:"1"}));$('<li data-fwidth="'+$("#wBox").val()+'" data-panelid="'+"size-"+e+'"><label class="checked"><input type="checkbox" checked="checked" />'+$("#wBox").val()+" x "+$("#hBox").val()+" ("+$("#iBox").val()+')</label><div class="close"></div></li>').appendTo($("#sizesList"));updateFrames();sortLists();$("#submitButton").prop("disabled",!1);$("#loading").fadeOut(100)});else{$("#error").fadeIn(100).delay(2e3).fadeOut("slow",function(){$(this).removeAttr("disabled")});$("#submitButton").prop("disabled",!1)}});$("#largestFirst").change(function(){$("#largestFirst").prop("checked")==1?localStorage.setItem("largestFirst","1"):localStorage.setItem("largestFirst","0");sortLists()});$("#cropFrames").change(function(){if($("#cropFrames").prop("checked")==1){localStorage.setItem("cropFrames","1");cropFrames()}else{localStorage.setItem("cropFrames","0");cropFrames()}});$("#extraPixels").change(function(){var e;clearTimeout(e);e=setTimeout(function(){($("#extraPixels").val()<1||!$.isNumeric($("#extraPixels").val()))&&$("#extraPixels").val(0);localStorage.setItem("extraPixels",$("#extraPixels").val());updateFrames()},2e3)});$("#sizesList").on("change","input",function(){var e=$(this);$(this).prop("disabled",!0);var t=$(this).parents("li").data("panelid"),n=JSON.parse(localStorage.getItem(t));if($(this).prop("checked")==1){$(this).parent("label").addClass("checked");createIframe(t);$("#"+t).fadeIn("fast",function(){$("#"+t).removeClass("noShow");resizeFramePanel();e.prop("disabled",!1)});displayitem=1}else{$(this).parent("label").removeClass("checked");$("#"+t).fadeOut("fast",function(){$("#"+t).empty();$("#"+t).addClass("noShow");resizeFramePanel();e.prop("disabled",!1)});displayitem=0}n.display=displayitem;localStorage.setItem(t,JSON.stringify(n))});$("#resetDefaults").on("click",function(e){e.preventDefault();if(window.confirm("Reset to defaults? All custom sizes will be lost!")){localStorage.clear();location.reload()}});$("#reloadFrames").on("click",function(){reloadFrames()});$("#slideInOut").on("click",function(){if(localStorage.getItem("panelHidden")=="0"){$("#container").stop(!0,!0).animate({"padding-left":"10px"},100);$("nav").stop(!0,!0).animate({left:"-290px"},100,function(){localStorage.setItem("panelHidden",1);$("#slideInOut").addClass("isIn")})}else{$("#container").stop(!0,!0).animate({"padding-left":"300px"},100);$("nav").stop(!0,!0).animate({left:"0"},100,function(){localStorage.setItem("panelHidden",0);$("#slideInOut").removeClass("isIn")})}});$("form").submit(function(e){e.preventDefault();$("#urlbox").removeClass("isLoading");defaulturl=addHttp($("#urlbox").val());history.pushState&&history.pushState("","","?"+defaulturl);updateFrames()});$("#infoPane").on("click",function(e){e.preventDefault();e.stopPropagation();$("#infoPane").fadeOut("fast")});$("#infoPane a").on("click",function(e){e.stopPropagation()});$("#infoOpen").on("click",function(e){e.preventDefault();$("#infoPane").fadeIn("fast")})});$(window).load(function(){cropFrames()});